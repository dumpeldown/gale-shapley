# gale-shapley
Implementation of the Gale-Shapley for a specific use-case algorithm in Python.   
Match a set of people to a set of locations with varying number of availabilities (capabilities) based on preferences.

## How to run
1. Clone the repository
2. Have Python 3 installed
3. **Optional**: Create test data by running `python gen_test.py`
3. Run the Gale-Shapley algorithm by running `python run_gale_shapley.py`

## Input data
``location_capabilities.csv`` and ``person_preferences.csv`` are the input files for the algorithm.
See the example files provided for the format of the input files.

## gen_test.py
Generates 5 sets of test data for the Gale-Shapley algorithm. The number of locations, people and capabilities per location can be changed in the script.
The script does a **weighted random selection** of locations and people to generate the preferences.

## run_gale_shapley.py
Runs the Gale-Shapley algorithm on the test data generated by ``gen_test.py``.
Comment out the line `run_tests()` to stop running the tests.

Change the production input files and comment in the relevant lines to run the algorithm on the production data.

## Output
The output of the algorithm is the list of pairs. It will be saved in a csv called `location_assignments.csv` of the form (with headers):

|Location   |Person   |
|-----------|---------|
|Location8  |Person35 |
|Location19 |Person20 |
|Location82 |Person117|
|Location82 |Person125|
|Location152|Person90 |
|Location152|Person36 |
|Location149|Person167|

**Not every person may be assigned a location. The remaining people are not assigned any location!**

See the output of the script for info of not assigned people and remaining capacity of locations.
This is an extract of a possible output in the console.

    Warnung: 2 Personen konnten keine Location aus ihren Präferenzen zugewiesen werden.
    - Person169: Präferenzen: ['Location17', 'Location9', 'Location19', 'Location91', 'Location4', 'Location15', 'Location1', 'Location20', 'Location8']
    - Person142: Präferenzen: ['Location11', 'Location3', 'Location1', 'Location20', 'Location6', 'Location9', 'Location4', 'Location15', 'Location12']

    Locations mit verbleibender Kapazität:
    - Location109: 2 Plätze frei
    - Location51: 1 Plätze frei
